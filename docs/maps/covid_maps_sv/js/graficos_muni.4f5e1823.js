(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["graficos_muni"],{"0dd5":function(a,s,o){"use strict";o.r(s);var i=function(){var a=this,s=a.$createElement,o=a._self._c||s;return o("div",{staticClass:"home"},[o("div",{staticClass:"grid-graficos"},[o("div",{staticStyle:{"grid-area":"a"}},[a._v("Detalle de casos de "+a._s(a.municipio.nombre))]),o("GraficoCasosDiariosMuni",{staticStyle:{"grid-area":"b"},attrs:{idMunicipio:a.idMunicipio,tipoCasos:"0"}}),o("GraficoCasosDiariosMuni",{staticStyle:{"grid-area":"c"},attrs:{idMunicipio:a.idMunicipio,tipoCasos:"1"}})],1),o("Footer")],1)},t=[],e=(o("ddb0"),o("9ab4")),r=o("2b0e"),c=o("2fe1"),n=o("fd2d"),d=o("6341"),l=o("f7e4"),h=function(){var a=this,s=a.$createElement,o=a._self._c||s;return o("div",[o("chart",{attrs:{type:a.tipoGrafico,labels:a.labels,datasets:a.dataset,options:a.options,height:"550px"}}),a.mostrarPromedioChk?o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:a.mostrarPromedioVar,expression:"mostrarPromedioVar"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(a.mostrarPromedioVar)?a._i(a.mostrarPromedioVar,null)>-1:a.mostrarPromedioVar},on:{change:function(s){var o=a.mostrarPromedioVar,i=s.target,t=!!i.checked;if(Array.isArray(o)){var e=null,r=a._i(o,e);i.checked?r<0&&(a.mostrarPromedioVar=o.concat([e])):r>-1&&(a.mostrarPromedioVar=o.slice(0,r).concat(o.slice(r+1)))}else a.mostrarPromedioVar=t}}}),a._v(" Promedio móvil 7 días ")]):a._e()],1)},p=[],u=o("60a3"),m=o("3ee1"),b=o("e9ea"),f=o("975c"),C=o("151c");let g=class extends r["a"]{constructor(){super(...arguments),this.fechasCasos=[],this.store=C["a"],this.labels=["Cargando..."],this.dataset=[{label:"Cargando casos...",backgroundColor:"#f87979",data:[0]}],this.options={responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{ticks:{min:0}}]},title:{text:"Cargando casos...",position:"top",display:!0,fontSize:20},legend:{position:"bottom",labels:{fontColor:"#2c3e50"}}}}async watchStore(){console.log("Store changed"),await this.init()}async watchMostrarPromedioVar(){console.log("mostrarPromedioVar changed"),await this.init()}async init(){if(console.log("store",C["a"]),this.fechasCasos=await C["a"].getFechasCasos(),!this.fechasCasos||0==this.fechasCasos.length)return;const a=await C["a"].obtenerCasosDiarios(this.fechasCasos[this.fechasCasos.length-1]);if(0==a.length)return void console.warn("No se pudo obtener los casos diarios de la fecha",this.fechasCasos[this.fechasCasos.length-1],this.fechasCasos.length-1);const s=["red","yellow","orange","blue","cyan","green","pink","silver","fucsia"],o=[],i=await C["a"].getHistCasosDiariosMunicipio(this.idMunicipio),t=i.map(a=>a.casos),e=i.map(a=>a.casos_diarios),r=Object(f["c"])(e,3,3),c=i.map(a=>a.casos_15d);if(this.tipoCasos==m["f"].acumulados?(o.push(new f["a"]("Casos totales acumulados",Object(f["b"])(t,this.fechasCasos),s[0])),o.push(new f["a"]("Casos activos aproximados (15 días)",Object(f["b"])(c,this.fechasCasos),s[2]))):(o.push(new f["a"]("Promedio móvil casos diarios",Object(f["b"])(r,this.fechasCasos),s[3])),o.push(new f["a"]("Casos diarios",Object(f["b"])(e,this.fechasCasos),"silver","bar"))),this.labels=this.fechasCasos,this.dataset=o,this.options.title)switch(this.tipoCasos){case m["f"].acumulados:this.options.title.text="Casos acumulados";break;case m["f"].diarios:this.options.title.text="Casos diarios";break;case m["f"].activos:this.options.title.text="Casos activos aproximados (15 días)";break}}mounted(){this.init().catch(a=>console.error(a))}};Object(e["a"])([Object(u["b"])({default:"line"})],g.prototype,"tipoGrafico",void 0),Object(e["a"])([Object(u["b"])()],g.prototype,"tipoCasos",void 0),Object(e["a"])([Object(u["b"])({default:!1})],g.prototype,"mostrarPromedioChk",void 0),Object(e["a"])([Object(u["b"])({default:!1})],g.prototype,"mostrarPromedioVar",void 0),Object(e["a"])([Object(u["b"])()],g.prototype,"idMunicipio",void 0),Object(e["a"])([Object(u["d"])("store",{deep:!0})],g.prototype,"watchStore",null),Object(e["a"])([Object(u["d"])("mostrarPromedioVar")],g.prototype,"watchMostrarPromedioVar",null),g=Object(e["a"])([Object(u["a"])({components:{Chart:b["a"]}})],g);var v=g,w=v,j=o("2877"),O=Object(j["a"])(w,h,p,!1,null,null,null),y=O.exports;let P=class extends r["a"]{constructor(){super(...arguments),this.idMunicipio=Number(this.$route.params.id_muni),this.municipio={}}async init(){const a=await C["a"].getFechasCasos(),s=await C["a"].obtenerCasosDiarios(a[a.length-1],"reload");console.log("casosDiarios",s);const o=[];o.push(C["a"].getHistCasosDiariosMunicipio(this.idMunicipio));await Promise.all(o);this.municipio=(await C["a"].getMunicipios()).get(this.idMunicipio)||{}}beforeMount(){this.init().catch(a=>console.log(a))}};P=Object(e["a"])([Object(c["b"])({name:"Gráficos",components:{Footer:n["a"],GraficoCasosDiariosMuni:y,GraficoResumenDiario:d["a"],GraficoCasosDiarios:l["a"]}})],P);var M=P,k=M,x=(o("5e78"),Object(j["a"])(k,i,t,!1,null,"73a8cfe3",null));s["default"]=x.exports},"301a":function(a,s,o){},"5e78":function(a,s,o){"use strict";var i=o("301a"),t=o.n(i);t.a}}]);
//# sourceMappingURL=graficos_muni.4f5e1823.js.map